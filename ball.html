<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Ball</title>
  <link rel="stylesheet" href="css/main.css" media="screen" title="no title" charset="utf-8">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.js" charset="utf-8"></script>
</head>

<body>
  <script src="js/three.js" charset="utf-8"></script>
  <script src="js/OrbitControls.js" charset="utf-8"></script>
  <script src="js/OBJLoader.js"></script>
  <script type="text/javascript">
    // Creating variables at one place
    var scene, camera, renderer,
      width, height, light,
      loader, material, mesh;

    // methods to call
    init();
    animate();

    // defining methods
    function init() {
      // Creating scene
      scene = new THREE.Scene();
      width = window.innerWidth;
      height = window.innerHeight;

      // Creating renderer
      renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      renderer.setSize(width, height);
      document.body.appendChild(renderer.domElement);

      // Creating camera
      camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 10000);
      camera.position.set(0, 4, 8);
      scene.add(camera);

      // Adding Controls
      var controls = new THREE.OrbitControls(camera, renderer.domElement);
      // controls.enableRotate = false;
      controls.enableZoom = false;

      // Updating viewport
      window.addEventListener('resize', function() {
        renderer.setSize(width, height);
        camera.aspect = width / height;
        camera.updateProjectionMatrix();
      });

      // Adding light
      renderer.setClearColor(0xffffff, 1);
      light = new THREE.AmbientLight(0xffffff);
      scene.add(light);

      // Loading json
      // loader = new THREE.JSONLoader();
      // loader.load('js/ball.js', function(geometry) {
      //   var texture = THREE.ImageUtils.loadTexture("texture.jpg");
      //   texture.wrapS = THREE.RepeatWrapping;
      //   texture.wrapT = THREE.RepeatWrapping;
      //   material = new THREE.MeshBasicMaterial({
      //     map: texture
      //   });
      //   mesh = new THREE.Mesh(geometry, material);
      //   var model = new THREE.Object3D();
      //   model.add(mesh);
      //   // model.scale.set(5, 5, 5);
      //   // model.position.set(-10, -20, 0);
      //   scene.add(model);
      // });

      // Native Sphere
      var geometry = new THREE.SphereGeometry(1, 50, 50);
      var texture = THREE.ImageUtils.loadTexture('texture.jpg');
      var material = new THREE.MeshBasicMaterial({ map: texture });
      var sphere = new THREE.Mesh(geometry, material);
      sphere.rotation.x = -0.5;
      scene.add(sphere);
    }

    function animate() {
      requestAnimationFrame(animate);
      //mesh.rotation.z += 0.01;
      renderer.render(scene, camera);
    }

    $.getJSON("js/shirt.json", function(json) {
      console.log(json.materials);
      for (i = 0; i <= 38; i++) {
        json.materials[i].color = 11316396;
      }
      console.log(json.materials[0].color);
    });

    var onKeyDown = function(event) {
      if (event.keyCode == 67) { // when 'c' is pressed
        material.color.setHex(0xff0000); // there is also setHSV and setRGB
      } else if (event.keyCode == 68) { // when 'd' is pressed
        material.color.setHex(0x00ff00); // there is also setHSV and setRGB
      } else if (event.keyCode == 69) { // when 'e' is pressed
        material.color.setHex(0x0000ff); // there is also setHSV and setRGB
      }
    };
    document.addEventListener('keydown', onKeyDown, false);
  </script>
</body>

</html>
