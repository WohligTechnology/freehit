<!DOCTYPE html>
<html lang="en">
	<head>
		<title>OBJ MTL loader</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				font-family: Monospace;
				background-color: #000; color: #fff;
				margin: 0px; overflow: hidden;
			}
		</style>
	</head>

	<body>
		<script src="js/three.js" charset="utf-8"></script>
	  <script src="js/OrbitControls.js" charset="utf-8"></script>
	  <script src="js/DDSLoader.js"></script>
	  <script src="js/OBJLoader.js"></script>
	  <script src="js/MTLLoader.js"></script>
	  <script src="js/OBJMTLLoader.js"></script>

		<script>
			var container;
			var camera, scene, renderer;
			var windowHalfX = window.innerWidth / 2;
			var windowHalfY = window.innerHeight / 2;

			init();
			animate();

			function init() {
				container = document.createElement('div');
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 10000 );
				camera.position.z = 15;

				// scene
				scene = new THREE.Scene();

				var controls = new THREE.OrbitControls(camera, container);
				controls.enableZoom = false;

				var ambient = new THREE.AmbientLight(0xdddddd);
				camera.add(ambient);

				var directionalLight = new THREE.DirectionalLight(0x777777);
				directionalLight.position.set(0, 0, 1).normalize();
				scene.add(directionalLight);
				var directionalLightG = new THREE.DirectionalLight(0x777777);
				directionalLightG.position.set(0, 0, -1).normalize();
				scene.add(directionalLightG);

				var spotLight = new THREE.SpotLight(0xffffff);
				spotLight.position.set(1000, 1000, 1000);
				scene.add(ambient);
				camera.add(spotLight);

				// model
				var onProgress = function (xhr) {
					if (xhr.lengthComputable) {
						var percentComplete = xhr.loaded / xhr.total * 100;
						//console.log(Math.round(percentComplete, 2) + '% downloaded');
					}
				};

				var onError = function (xhr) {};

				//THREE.Loader.Handlers.add(/\.dds$/i, new THREE.DDSLoader());

				var loader = new THREE.OBJMTLLoader();
				loader.load('res/pad/Pad2.obj', 'res/pad/Pad2.mtl', function (object) {
					//object.position.y = - 80;
					scene.add(object);
				}, onProgress, onError);

				// var mtlLoader = new THREE.MTLLoader();
				// mtlLoader.setBaseUrl('res/pad/');
				// mtlLoader.load('res/pad/Pad2.mtl', function (materials) {
				// 	materials.preload();
				// 	var objLoader = new THREE.OBJLoader();
				// 	//objLoader.setMaterials(materials);
				// 	objLoader.load('res/pad/Pad2.obj',  function (object) {
				// 		// object.traverse(function (child) {
				// 		// 	if(child instanceof THREE.Mesh) {
				// 		// 		child.material.map = texture;
				// 		// 	}
				// 		// });
				// 		scene.add(object);
				// 	}, onProgress, onError);
				// });

				renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
				renderer.setPixelRatio(window.devicePixelRatio );
				renderer.setSize(window.innerWidth, window.innerHeight);
				renderer.setClearColor(0x777777, 1);
				container.appendChild(renderer.domElement);

				//document.addEventListener( 'mousemove', onDocumentMouseMove, false );
				window.addEventListener('resize', onWindowResize, false);
			}

			function onWindowResize() {
				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );
			}
			function animate() {
				requestAnimationFrame( animate );
				render();
			}

			function render() {
				camera.lookAt( scene.position );
				renderer.render(scene, camera);
			}
		</script>
	</body>
</html>
